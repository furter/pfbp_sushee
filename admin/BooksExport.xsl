<?xml version="1.0"?><xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">	<xsl:import href="common.xsl"/>	<xsl:template match="/RESPONSE">		<html>			<xsl:call-template name="attribute_html"/>			<head>				<xsl:call-template name="html_head"/>			</head>			<body class="BooksExport">				<div id="container">					<xsl:apply-templates select="$website" mode="top"/>					<xsl:apply-templates select="$media" mode="h1"/>					<xsl:call-template name="tools_navigation"/>					<xsl:apply-templates select="/RESPONSE/RESULTS[@name='data']" mode="display"/>				</div>			</body>		</html>	</xsl:template>	<xsl:template match="RESULTS" mode="display">		<xsl:if test="@hits &gt; 0">			<div style="clear:both;">				<ul>					<xsl:for-each select="MEDIA">						<li>							<a href="#m{@ID}">								<xsl:apply-templates select="." mode="title"/>							</a>						</li>					</xsl:for-each>				</ul>				<xsl:apply-templates select="MEDIA" mode="details"/>			</div>		</xsl:if>	</xsl:template>	<xsl:template match="MEDIA" mode="details">		<xsl:param name="current_element" select="."/>		<a name="m{@ID}"/>		<xsl:apply-templates select="." mode="h2"/>		<table class="Book">			<tr>				<th>Fran&#xE7;ais</th>				<th>N&#xE9;erlandais</th>				<th>Anglais</th>			</tr>			<tr>				<xsl:apply-templates select="/RESPONSE/DISPLAY" mode="display_details">					<xsl:with-param name="element" select="$current_element"/>					<xsl:with-param name="language" select="'fre'"/>				</xsl:apply-templates>				<xsl:apply-templates select="/RESPONSE/DISPLAY" mode="display_details">					<xsl:with-param name="element" select="$current_element"/>					<xsl:with-param name="language" select="'dut'"/>				</xsl:apply-templates>				<xsl:apply-templates select="/RESPONSE/DISPLAY" mode="display_details">					<xsl:with-param name="element" select="$current_element"/>					<xsl:with-param name="language" select="'eng'"/>				</xsl:apply-templates>			</tr>		</table>	</xsl:template>	<xsl:template match="DISPLAY" mode="display_details">		<xsl:param name="element"/>		<xsl:param name="language"/>		<td>			<xsl:apply-templates select="*" mode="display_details">				<xsl:with-param name="element" select="$element"/>				<xsl:with-param name="language" select="$language"/>			</xsl:apply-templates>		</td>	</xsl:template>	<xsl:template match="DATA[@service='LABEL']" mode="display_details">		<h6>			<xsl:text>$1 </xsl:text>			<xsl:apply-templates select="." mode="display_label">				<xsl:with-param name="language" select="$language"/>			</xsl:apply-templates>		</h6>	</xsl:template>	<xsl:template match="DATA[@path= 'BOOK_COPIES' or @path='INSIDE_PAGES' or @path='INSIDE_BOOKLETS' or @path='COVER_PAGES' or @path='COVER_BOOKLETS' or @path='BOOK_WEIGHT']" mode="display_details">		<xsl:param name="element"/>		<xsl:param name="language"/>		<xsl:variable name="value">			<xsl:apply-templates select="." mode="display_cell_content">				<xsl:with-param name="element" select="$element"/>				<xsl:with-param name="language" select="$language"/>			</xsl:apply-templates>		</xsl:variable>		<xsl:if test="$value != ''">			<div class="field">				<xsl:apply-templates select="." mode="display_cell_content">					<xsl:with-param name="element" select="$element"/>					<xsl:with-param name="language" select="$language"/>				</xsl:apply-templates>				<xsl:text> </xsl:text>				<xsl:apply-templates select="." mode="display_label">					<xsl:with-param name="language" select="$language"/>				</xsl:apply-templates>			</div>		</xsl:if>	</xsl:template>	<xsl:template match="DATA[@path='BOOK_COPIES']" mode="display_details">		<xsl:param name="element"/>		<xsl:param name="language"/>		<xsl:variable name="label_lang" select="concat('label_', $language)"/>		<xsl:variable name="value">			<xsl:apply-templates select="." mode="display_cell_content">				<xsl:with-param name="element" select="$element"/>				<xsl:with-param name="language" select="$language"/>			</xsl:apply-templates>		</xsl:variable>		<xsl:if test="$value != ''">			<div class="field">				<b><xsl:value-of select="/RESPONSE/RESULTS[@name=$label_lang]/LABEL[@name='book_BOOK_COPIES_title']"/><xsl:text>: </xsl:text></b>				<xsl:apply-templates select="." mode="display_cell_content">					<xsl:with-param name="element" select="$element"/>					<xsl:with-param name="language" select="$language"/>				</xsl:apply-templates>				<xsl:text> </xsl:text>				<xsl:apply-templates select="." mode="display_label">					<xsl:with-param name="language" select="$language"/>				</xsl:apply-templates>			</div>		</xsl:if>	</xsl:template>	<xsl:template match="*" mode="display_details">		<xsl:param name="element"/>		<xsl:param name="language"/>		<xsl:variable name="value">			<xsl:apply-templates select="." mode="display_cell_content">				<xsl:with-param name="element" select="$element"/>				<xsl:with-param name="language" select="$language"/>			</xsl:apply-templates>		</xsl:variable>		<xsl:if test="$value != ''">			<div class="field">				<b>					<xsl:apply-templates select="." mode="display_label">						<xsl:with-param name="language" select="$language"/>					</xsl:apply-templates>					<xsl:text>: </xsl:text>				</b>				<xsl:apply-templates select="." mode="display_cell_content">					<xsl:with-param name="element" select="$element"/>					<xsl:with-param name="language" select="$language"/>				</xsl:apply-templates>			</div>		</xsl:if>	</xsl:template>	<xsl:template match="*" mode="display_label">		<xsl:param name="language"/>		<xsl:variable name="label" select="concat('book_', @path)"/>		<xsl:variable name="label_lang" select="concat('label_', $language)"/>		<xsl:value-of select="/RESPONSE/RESULTS[@name=$label_lang]/LABEL[@name = current()/@label]"/>	</xsl:template>	<xsl:template match="GROUP" mode="display_details">		<xsl:param name="element"/>		<xsl:param name="language"/>		<xsl:apply-templates select="*" mode="display_cell_content">			<xsl:with-param name="element" select="$element"/>			<xsl:with-param name="language" select="$language"/>		</xsl:apply-templates>	</xsl:template>	<xsl:template match="GROUP/DATA[@service='LABEL']" mode="display_cell_content">		<xsl:param name="element"/>		<xsl:param name="language"/>		<xsl:apply-templates select="." mode="display_label">			<xsl:with-param name="element" select="$element"/>			<xsl:with-param name="language" select="$language"/>		</xsl:apply-templates>	</xsl:template>	<xsl:template match="DATA[@service='DESCRIPTION']" mode="display_cell_content">		<xsl:param name="element"/>		<xsl:param name="language"/>		<xsl:variable name="current_content" select="$element/DESCRIPTIONS/DESCRIPTION[@languageID = $language]//*[name() = current()/@path]"/>		<xsl:choose>			<xsl:when test="$current_content/CSS">				<xsl:for-each select="$current_content/CSS/*">					<xsl:call-template name="add_br_if_not_last"/>					<xsl:value-of select="."/>				</xsl:for-each>			</xsl:when>			<xsl:otherwise>				<xsl:value-of select="$current_content"/>			</xsl:otherwise>		</xsl:choose>	</xsl:template>	<xsl:template match="DATA[@path= 'BOOK_TRANSLATOR']" mode="display_cell_content">		<xsl:param name="element"/>		<xsl:param name="language"/>		<xsl:variable name="current_content" select="$element/DESCRIPTIONS/DESCRIPTION[@languageID = $language]//*[name() = current()/@path]"/>		<xsl:for-each select="$current_content/CSS/*">			<xsl:value-of select="."/>			<xsl:call-template name="add_coma_if_not_last"/>		</xsl:for-each>	</xsl:template>	<xsl:template match="DATA[@service='DEPENDENCY']" mode="display_cell_content">		<xsl:param name="element"/>		<xsl:param name="dep_type" select="@type"/>		<xsl:for-each select="$element/DEPENDENCIES/DEPENDENCY[@type = $dep_type]/*">			<xsl:apply-templates select="." mode="title"/>			<xsl:choose>				<xsl:when test="$dep_type = 'BookToPeopleContact'">					<xsl:if test="INFO/EMAIL1 != ''">						<xsl:text> - </xsl:text>						<xsl:value-of select="INFO/EMAIL1"/>					</xsl:if>					<xsl:if test="INFO/PHONE1 != ''">						<xsl:text> - </xsl:text>						<xsl:value-of select="INFO/PHONE1"/>					</xsl:if>					<xsl:if test="INFO/MOBILEPHONE != ''">						<xsl:text> - </xsl:text>						<xsl:value-of select="INFO/MOBILEPHONE"/>					</xsl:if>				</xsl:when>				<!--xsl:when test="$dep_type = 'BookToGraphist'">					<xsl:if test="INFO/DENOMINATION != '' and INFO/FIRSTNAME != ''">						<xsl:text> - </xsl:text>						<xsl:value-of select="INFO/DENOMINATION"/>					</xsl:if>				</xsl:when-->			</xsl:choose>			<xsl:if test="INFO/COUNTRYID and INFO/COUNTRYID != 'bel'">				<xsl:text> (</xsl:text>				<xsl:value-of select="INFO/COUNTRYID"/>				<xsl:text>)</xsl:text>			</xsl:if>			<xsl:call-template name="add_coma_if_not_last"/>		</xsl:for-each>	</xsl:template></xsl:stylesheet>