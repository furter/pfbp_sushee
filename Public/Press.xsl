<?xml version="1.0"?><xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">	<xsl:import href="common.xsl"/>	<xsl:template match="/RESPONSE">		<xsl:call-template name="html"/>	</xsl:template>	<xsl:template match="MEDIA" mode="content">		<div id="content">			<xsl:apply-templates select="." mode="h1"/>			<xsl:apply-templates select="." mode="body"/>			<xsl:apply-templates select="." mode="specific"/>		</div>	</xsl:template>	<xsl:template match="MEDIA" mode="specific">		<div id="specific">			<xsl:for-each select="DEPENDENCIES/DEPENDENCY[@type='mediaContent']/MEDIA">				<xsl:sort select="INFO/CREATIONDATE" data-type="text" order="descending"/>				<xsl:apply-templates select="." mode="in_galleries"/>			</xsl:for-each>		</div>	</xsl:template>	<xsl:template match="MEDIA" mode="in_galleries">		<div id="m_{@ID}" class="gallery">			<xsl:apply-templates select="." mode="h3"/>			<xsl:if test="INFO/MEDIATYPE = 'Download'">				<p>					<a>						<xsl:apply-templates select="." mode="href"/>						<xsl:value-of select="//LABEL[@name='download_file']"/>					</a>				</p>			</xsl:if>			<xsl:if test="DESCRIPTIONS/DESCRIPTION/COPYRIGHT != ''">				<p>					<xsl:text>&#xA9;</xsl:text>					<xsl:value-of select="DESCRIPTIONS/DESCRIPTION/COPYRIGHT"/>				</p>			</xsl:if>			<xsl:apply-templates select="DESCRIPTIONS/DESCRIPTION/CUSTOM/VISUAL_FOLDER" mode="visual_folder">				<xsl:with-param name="alt">					<xsl:apply-templates select="." mode="title"/>					<xsl:if test="DESCRIPTIONS/DESCRIPTION/COPYRIGHT != ''">						<xsl:text> &#xA9; </xsl:text>						<xsl:value-of select="DESCRIPTIONS/DESCRIPTION/COPYRIGHT"/>					</xsl:if>				</xsl:with-param>			</xsl:apply-templates>		</div>	</xsl:template>	<xsl:template match="MEDIA[INFO/MEDIATYPE = 'Donwloads']" mode="in_galleries">		<div id="m_{@ID}" class="downloads">			<xsl:apply-templates select="." mode="h3"/>			<ul>				<xsl:apply-templates select="DEPENDENCIES/DEPENDENCY/MEDIA" mode="in_downloads"/>			</ul>		</div>	</xsl:template>	<xsl:template match="MEDIA" mode="in_downloads">		<xsl:apply-templates select="." mode="navigation_item"/>	</xsl:template>	<xsl:template match="MEDIA[INFO/MEDIATYPE = 'Download']" mode="title">		<xsl:value-of select="DESCRIPTIONS/DESCRIPTION/TITLE"/>		<xsl:text> - </xsl:text>		<xsl:value-of select="DESCRIPTIONS/DESCRIPTION/CUSTOM/FILE/@name"/>		<xsl:value-of select="DESCRIPTIONS/DESCRIPTION/CUSTOM/FILE/@ext"/>	</xsl:template>	<xsl:template match="MEDIA[INFO/MEDIATYPE = 'Download' and DESCRIPTIONS/DESCRIPTION/CUSTOM/UNSYNC_FILE != '']" mode="title">		<xsl:value-of select="DESCRIPTIONS/DESCRIPTION/CUSTOM/UNSYNC_FILE/@name"/>		<xsl:value-of select="DESCRIPTIONS/DESCRIPTION/CUSTOM/UNSYNC_FILE/@ext"/>	</xsl:template>	<xsl:template match="MEDIA[INFO/MEDIATYPE = 'Download']" mode="href">		<xsl:attribute name="href">			<xsl:value-of select="$files"/>			<xsl:value-of select="DESCRIPTIONS/DESCRIPTION/CUSTOM/FILE"/>		</xsl:attribute>	</xsl:template>	<xsl:template match="MEDIA[INFO/MEDIATYPE = 'Download' and DESCRIPTIONS/DESCRIPTION/CUSTOM/UNSYNC_FILE != '']" mode="href">		<xsl:attribute name="href">			<xsl:value-of select="$files"/>			<xsl:value-of select="DESCRIPTIONS/DESCRIPTION/CUSTOM/UNSYNC_FILE"/>		</xsl:attribute>	</xsl:template>	<xsl:template match="VISUAL_FOLDER" mode="visual_folder">		<xsl:param name="name" select="."/>		<xsl:param name="alt"/>		<div>			<a href="DownloadZip.php?path={.}&amp;type=folder">				<xsl:value-of select="//LABEL[@name='download_pictures']"/>			</a>		</div>		<xsl:for-each select="../TREE[@path = $name]/FILE">			<xsl:sort select="@shortname" data-type="text" order="ascending"/>			<div id="img_{ancestor::MEDIA/@ID}_{@shortname}" class="img_container">				<xsl:if test="@path != ''">					<xsl:apply-templates select="." mode="visual">						<xsl:with-param name="visual" select="@path"/>						<xsl:with-param name="height" select="80"/>						<xsl:with-param name="alt">							<xsl:value-of select="$alt"/>						</xsl:with-param>					</xsl:apply-templates>				</xsl:if>				<xsl:apply-templates select="." mode="tools">					<xsl:with-param name="copyright" select="substring-after($alt,'&#xA9;')"/>				</xsl:apply-templates>			</div>		</xsl:for-each>		<hr class="clear"/>	</xsl:template>	<xsl:template match="FILE" mode="tools">		<xsl:param name="copyright"/>		<div class="file_tools">			<xsl:if test="$copyright != ''">				<xsl:text>&#xA9; </xsl:text>				<xsl:value-of select="$copyright"/>				<br/>			</xsl:if>			<a href="DownloadZip.php?path={@path}&amp;type=file">				<xsl:value-of select="//LABEL[@name='download_file']"/>			</a>		</div>	</xsl:template></xsl:stylesheet>